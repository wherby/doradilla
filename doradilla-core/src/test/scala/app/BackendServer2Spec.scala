package app

import doracore.ActorTestClass
import doradilla.back.BackendServer

/**
  * For app in doradilla
  * Created by whereby[Tao Zhou](187225577@qq.com) on 2019/11/2
  */
class BackendServer2Spec extends ActorTestClass  {
  "Spec for autocreate actor system" must{
    "start batch job and query the result  without pre-created actor system" in {
      val oldServerMap = BackendServer.backendServerMap
      BackendServer.backendServerMap =Map()
      val backendServer = BackendServer.getBackendServerForCommand(None)
      backendServer shouldBe a [BackendServer]
      backendServer.actorSystemOpt.get.terminate()
      BackendServer.backendServerMap = oldServerMap
    }
  }
}
